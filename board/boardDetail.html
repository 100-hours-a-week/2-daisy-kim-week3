<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../commonStyle.css">
    <link rel="stylesheet" href="./boardDetail.css">
    <title>게시글 상세 보기</title>
    <script type="module">
        import { boardItems } from '../data/board.js';

        document.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            const boardItem = boardItems.find(item => item.id === parseInt(id));

            if (boardItem) {
                const boardDetail = document.getElementById("container");
                boardDetail.innerHTML = `
                    <div class="title-header">
                        <div class="title">${boardItem.title}</div>
                        <div class="board-item-info">
                            <div class="board-item-info-left">
                                <div class="profile-img">
                                    <img src="${boardItem.profileImg}">
                                </div>
                                <div class="profile-name">${boardItem.writer}</div>
                                <div class="written-time">${boardItem.time}</div>
                            </div>
                            <div class="board-item-info-right">
                                <button class="board-item-edit-button">
                                    <a href="boardPost.html">수정</a>
                                </button>
                                <button class="board-item-edit-button">
                                    <a href="boardList.html">삭제</a>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="board-body">
                        <img class="board-img" src="${boardItem.contentImg}">
                        <div class="board-content">${boardItem.content}</div>
                        <div class="board-reaction-info">
                            <div class="like-container">
                                <div class="like-cnt">${boardItem.likes}</div>
                                <div class="like-text">좋아요수</div>
                            </div>
                            <div class="like-container">
                                <div class="like-cnt">${boardItem.views}</div>
                                <div class="like-text">조회수</div>
                            </div>
                            <div class="like-container">
                                <div class="like-cnt">${boardItem.commentsCnt}</div>
                                <div class="like-text">댓글</div>
                            </div>
                        </div>
                    </div>
                    <hr width="100%">
                `;
            } else {
                document.getElementById("container").innerHTML = "<p>게시글을 찾을 수 없습니다.</p>";
            }

            const commentItems = boardItem.comments;
            const commentList = document.getElementById("comment-list");
            commentList.innerHTML = commentItems.map(item => `
            <div class="comment-item">
                <div class="comment-list-right">
                    <div class="comment-top">
                        <div class="comment-writer-profile">
                            <img class="comment-writer-profile-img" src="../assets/img/defaultProfile.png">
                        </div>
                        <div class="comment-writer-name">${item.writer}</div>
                        <div class="written-time">${item.time}</div>
                    </div>
                    <div class="comment-bottom">
                        ${item.content}
                    </div>
                </div>
                <div class="comment-buttons">
                    <button class="board-item-edit-button">수정</button>
                    <button class="board-item-edit-button">삭제</button>
                </div>
            </div>
            `).join("");

        });
    </script>
</head>
<body>
    <header>아무말 대잔치</header>
    <div class="profile-icon">
        <img class="profile-img" src="../assets/img/defaultProfile.png">
    </div>
    <div class="wrapper">
        <div class="container" id="container"></div>
        <form action="boardDetail.html" class="comment-container">
            <textarea placeholder="댓글을 남겨주세요!!" class="comment-input"></textarea>
            <hr width="100%">
            <input type="submit" class="comment-register-button" value="댓글 등록">
        </form>
        <div id="comment-list">
        </div>
    </div>
</body>
</html>
